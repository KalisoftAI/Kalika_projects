{% extends "base.html" %}

{% block title %} {{ maincategory }} Products {% endblock %}

{% block content %}
<div class="container">
    <header class="product-category py-3 my-4 border-bottom">
        <h1 class="h2">{{ maincategory }} Products</h1>
        <a href="{{ url_for('home') }}" class="back-link">‚Üê Back to Home</a>
    </header>

    <div class="product-grid">
        {% if products %}
            {% for product in products %}
                <div class="product-card">
                    <a href="{{ url_for('product_detail', product_id=product.id) }}">
                        <div class="product-image-wrapper">
                            <img src="{{ product.image_url }}" alt="{{ product.name }}" class="product-image">
                        </div>
                        <h3 class="product_name">{{ product.name }}</h3>
                    </a>
                    <p class="product-description">{{ product.subcategory }}</p>
                    <span class="product_price">Rs. {{ "%.2f"|format(product.price) }}</span>

                    <form action="{{ url_for('cart1.add_to_cart') }}" method="POST" class="product-form">
                        <input type="hidden" name="itemcode" value="{{ product.code }}">
                        <input type="hidden" name="product_name" value="{{ product.name }}">
                        <input type="hidden" name="product_price" value="{{ product.price }}">
                        <input type="hidden" name="image_url" value="{{ product.image_url }}">
                        <button type="submit" class="add-to-cart">Add to Cart</button>
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <p>No products found in this category.</p>
        {% endif %}
    </div>
</div>
{% endblock %}