<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            width: 80%;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h2 {
            text-align: center;
            color: #007BFF;
        }
        #user-personalization {
            text-align: center;
            margin-bottom: 20px;
        }
        #cart-items {
            list-style-type: none;
            padding: 0;
        }
        #cart-items li {
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            display: flex;
            align-items: center;
        }
        .product-image {
            width: 80px; /* Adjust as needed */
            height: auto; /* Maintain aspect ratio */
            margin-right: 15px;
        }
        .product-info {
            flex-grow: 1; /* Take up remaining space */
        }
        .btn {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        .btn:hover {
            background-color: #0056b3; /* Darker shade on hover */
        }
        .logout-btn {
            background-color: #FF4D4D; /* Red color for logout button */
        }
        .logout-btn:hover {
            background-color: #c70000; /* Darker shade on hover */
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Your Cart</h2>

    <div id="user-personalization">
        <label for="user-name">Enter your name:</label>
        <input type="text" id="user-name" placeholder="Your Name" />
        <button class="btn" id="save-name">Save Name</button>
    </div>

    <ul id="cart-items"></ul>

    <a href="/" class="btn">Continue Shopping</a>
    <button class="btn logout-btn" id="logout">Logout</button>
</div>

<script>
// Retrieve cart from localStorage
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// Function to display user name
function displayUserName() {
    const userName = localStorage.getItem('userName');
    if (userName) {
        document.getElementById('user-personalization').innerHTML = `<h3>Welcome, ${userName}!</h3>`;
    }
}

// Function to display cart items
function displayCart() {
    const cartItemsContainer = document.getElementById('cart-items');

    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<li>Your cart is empty.</li>';
        return;
    }

    // Clear previous items
    cartItemsContainer.innerHTML = '';

    // Loop through each item and create list elements
    cart.forEach(item => {
        const listItem = document.createElement('li');

        // Create product image element
        const productImage = document.createElement('img');
        productImage.src = `images/${item.name.replace(/\s+/g, '_').toLowerCase()}.jpg`; // Assuming image names are in a specific format
        productImage.alt = item.name;
        productImage.classList.add('product-image');

        // Create product info element
        const productInfo = document.createElement('div');
        productInfo.classList.add('product-info');
        productInfo.textContent = `${item.name} - Quantity: ${item.quantity} - Price: RS.${item.price}`;

        // Append image and info to list item
        listItem.appendChild(productImage);
        listItem.appendChild(productInfo);

        cartItemsContainer.appendChild(listItem);
    });
}

// Function to clear the cart and logout
function logout() {
    localStorage.removeItem('cart'); // Clear the cart from localStorage
    localStorage.removeItem('userName'); // Optionally clear user name
    alert("You have been logged out.");
    window.location.href = "/"; // Redirect to the main page
}

// Event listener for logout button
document.getElementById('logout').addEventListener('click', logout);

// Call functions on page load
displayUserName();
displayCart();
</script>

</body>
</html>