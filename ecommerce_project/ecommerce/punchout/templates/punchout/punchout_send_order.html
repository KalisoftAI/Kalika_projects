{% extends 'catalog/base.html' %}
{% load static %}

{% block title %}Punchout Order Sending{% endblock %}

{% block content %}
<div class="container mx-auto p-6 bg-white shadow-md rounded-lg mt-8 text-center">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">आपका पंचआउट ऑर्डर भेजा जा रहा है...</h2>
    <p class="text-gray-700 mb-4">आपको जल्द ही खरीदार के सिस्टम पर रीडायरेक्ट किया जाएगा।</p>
    <div class="flex justify-center items-center">
        <!-- Loading spinner ya koi animation yahan add kar sakte hain -->
        <svg class="animate-spin -ml-1 mr-3 h-10 w-10 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
    </div>
    <p class="text-sm text-gray-600 mt-4">यदि आप ऑटोमेटिकली रीडायरेक्ट नहीं होते हैं, तो कृपया कुछ क्षण प्रतीक्षा करें।</p>

    <!-- Yeh form auto-submit hoga Punchout Order Message ko buyer ke system par bhejne ke liye -->
    <form id="punchoutForm" action="{{ punchout_return_url }}" method="POST" style="display: none;">
        <input type="hidden" name="cxml-urlencoded" value="{{ punchout_cxml }}">
        <input type="submit" value="Send Order">
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Form ko page load hone par turant submit karein
        document.getElementById('punchoutForm').submit();

        // Debugging ke liye: agar aap show_punchout_debug par jana chahte hain
        // setTimeout(function() {
        //     window.location.href = "{% url 'punchout:show_punchout_debug' %}";
        // }, 3000); // 3 second baad debug page par redirect karein
    });
</script>
{% endblock %}
